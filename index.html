<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malla Interactiva Arqueología</title>
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; font-family: sans-serif; }
        #header {
            padding: 10px 20px; background: #333; color: white;
            display: flex; justify-content: space-between; align-items: center; height: 50px;
        }
        #network { width: 100%; height: calc(100vh - 50px); background: #f0f0f0; }
        .legend-item { display: inline-block; margin-left: 15px; font-size: 14px; }
        .dot { height: 10px; width: 10px; border-radius: 50%; display: inline-block; margin-right: 5px; }
    </style>
</head>
<body>

<div id="header">
    <div><strong>Malla Arqueología</strong> <span style="font-size:0.8em; color:#ccc;">(Clic en un ramo para Aprobar/Desaprobar)</span></div>
    <div>
        <span class="legend-item"><span class="dot" style="background:green;"></span>Aprobado</span>
        <span class="legend-item"><span class="dot" style="background:#2196F3;"></span>Disponible</span>
        <span class="legend-item"><span class="dot" style="background:#cccccc;"></span>Bloqueado</span>
    </div>
</div>

<div id="network"></div>

<script type="text/javascript">
    // --- 1. BASE DE DATOS DE LA MALLA ---
    // Hemos procesado tu archivo para manejar la lógica "Y" y "O"
    const rawData = [
        // Semestre 1
        { id: "Arqueología General I", sem: 1, req: [] },
        { id: "Pueblo Originarios de Chile", sem: 1, req: [] },
        { id: "Epistemología", sem: 1, req: [] },
        { id: "Expresión Escrita", sem: 1, req: [] },
        { id: "Introducción a las Ciencias Sociales", sem: 1, req: [] },
        { id: "Inglés I", sem: 1, req: [] },
        // Semestre 2
        { id: "Arqueología General II", sem: 2, req: ["Arqueología General I"] },
        { id: "Arqueología de América I", sem: 2, req: ["Arqueología General I"] },
        { id: "Etnografías Clásicas", sem: 2, req: [] },
        { id: "Métodos y Técnicas de Terreno I", sem: 2, req: ["Arqueología General I"] },
        { id: "Matemática", sem: 2, req: [] },
        { id: "Inglés II", sem: 2, req: ["Inglés I"] },
        // Semestre 3
        { id: "Análisis de Material Arqueológico I: Lítica", sem: 3, req: ["Arqueología General II"] },
        { id: "Análisis de Material Arqueológico II: Botánica", sem: 3, req: ["Arqueología General II"] },
        { id: "Arqueología de América II", sem: 3, req: ["Arqueología de América I"] },
        { id: "Etnoarqueología", sem: 3, req: ["Arqueología General II", "Etnografías Clásicas"] },
        { id: "Estadística I", sem: 3, req: ["Matemática"] },
        { id: "Teoría Arqueológica I", sem: 3, req: ["Arqueología General II", "Epistemología"] },
        { id: "Optativo FG 1", sem: 3, label: "Optativo Formación General", req: [] },
        { id: "Optativo Teológico 1", sem: 3, label: "Optativo Formación Teológica", req: [] },
        // Semestre 4
        { id: "Análisis de Material Arqueológico III: Cerámica", sem: 4, req: ["Arqueología General II"] },
        { id: "Análisis de Material Arqueológico IV: Zooarqueología", sem: 4, req: ["Arqueología General II"] },
        { id: "Arqueología del Norte Árido de Chile", sem: 4, req: ["Arqueología General II", "Arqueología de América II"] },
        { id: "Métodos y Técnicas de Terreno II", sem: 4, req: ["Métodos y Técnicas de Terreno I"] },
        { id: "Estadística II", sem: 4, req: ["Estadística I"] },
        { id: "Teoría Arqueológica II", sem: 4, req: ["Teoría Arqueológica I"] },
        { id: "Optativo FG 2", sem: 4, label: "Optativo Formación General", req: [] },
        { id: "Optativo Teológico 2", sem: 4, label: "Optativo Formación Teológica", req: [] },
        // Semestre 5
        { id: "Laboratorio de Arte Rupestre", sem: 5, req: ["Arqueología General II"] },
        { id: "Arqueología de Chile Semiárido", sem: 5, req: ["Arqueología General II", "Arqueología de América I"] },
        { id: "Arqueología de Chile Centro-Sur", sem: 5, req: ["Arqueología General II", "Arqueología de América I"] },
        { id: "Métodos y Técnicas de Terreno III", sem: 5, req: ["Métodos y Técnicas de Terreno II"] },
        { id: "Ética Arqueológica", sem: 5, req: ["Arqueología General II"] },
        { id: "Formación complementaria 1", sem: 5, req: [] },
        // Semestre 6 (OJO: Aquí hay lógica OR para el Lab de Especialización)
        { id: "Laboratorio de Especialización I", sem: 6, req: ["Lítica_O_Botánica"], logic: "OR" }, 
        { id: "Laboratorio de Bioarqueología", sem: 6, req: ["Arqueología General II", "Ética Arqueológica"] },
        { id: "Arqueología Histórica", sem: 6, req: ["Arqueología General II", "Introducción a las Ciencias Sociales"] },
        { id: "Arqueología de la Patagonia Chilena", sem: 6, req: ["Arqueología de América I"] },
        { id: "Gestión del Patrimonio", sem: 6, req: ["Arqueología General II", "Ética Arqueológica"] },
        { id: "Teoría Arqueológica III", sem: 6, req: ["Teoría Arqueológica II"] },
        // Semestre 7
        { id: "Laboratorio de Especialización II", sem: 7, req: ["Ceramica_O_Zoo"], logic: "OR" },
        { id: "Arqueología Contemporánea", sem: 7, req: ["Arqueología Histórica", "Teoría Arqueológica II"] },
        { id: "Métodos y Técnicas de Terreno IV", sem: 7, req: ["Métodos y Técnicas de Terreno III"] },
        { id: "Museología", sem: 7, req: ["Arqueología General II"] },
        { id: "Teoría Arqueológica IV", sem: 7, req: ["Teoría Arqueológica II"] },
        { id: "Formación complementaria 2", sem: 7, req: [] },
        //
